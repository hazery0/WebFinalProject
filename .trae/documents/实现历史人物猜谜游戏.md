# 历史人物猜谜游戏实现计划

## 后端实现

1. **创建实体类**
   - 创建 `HistoricalPerson` 实体类，包含以下字段：
     - `id` (Long, 主键)
     - `name` (String, 人物名称)
     - `birthYear` (Integer, 出生年份)
     - `isLiterary` (Integer, 1/0 表示是否为文学家)
     - `isPolitical` (Integer, 1/0 表示是否为政治家)
     - `isThinker` (Integer, 1/0 表示是否为思想家)
     - `isScientist` (Integer, 1/0 表示是否为科学家)

2. **创建数据访问层**
   - 创建 `HistoricalPersonRepository` 接口，继承 JpaRepository
   - 添加模糊搜索方法 `findByNameContaining`
   - 添加随机获取人物方法 `findRandomPerson`

3. **创建服务层**
   - 创建 `HistoricalPersonService` 服务类
   - 实现模糊搜索功能
   - 实现随机获取目标人物功能
   - 实现根据 ID 获取人物详情功能

4. **创建控制器**
   - 创建 `HistoricalPersonController` 控制器
   - 实现 API 端点：
     - `GET /api/historical-persons/search?name={name}` - 模糊搜索
     - `GET /api/historical-persons/random` - 随机获取目标人物
     - `GET /api/historical-persons/{id}` - 获取人物详情

5. **配置安全和跨域**
   - 更新 `SecurityConfig`，允许匿名访问历史人物相关 API
   - 更新 CORS 配置

## 前端实现

1. **创建游戏组件**
   - 创建 `HistoricalFigureGame.vue` 组件
   - 实现头部登录状态显示和跳转
   - 实现搜索区域（输入框+搜索按钮+下拉列表）
   - 实现猜测结果显示表格
   - 实现游戏逻辑（比较猜测与目标人物）
   - 实现胜利条件和游戏重置

2. **更新 API 服务**
   - 在 `api.ts` 中添加历史人物相关 API 方法
   - 实现搜索、获取随机人物、获取人物详情的请求

3. **更新路由配置**
   - 在 `router/index.ts` 中添加游戏路由
   - 将游戏页面设置为登录后的首页

4. **实现游戏逻辑**
   - 比较出生年份，显示上下箭头
   - 比较标签，设置绿色（匹配）和灰色（不匹配）
   - 检查名称匹配，显示胜利信息
   - 管理猜测历史记录

## 技术细节

1. **数据库**：使用现有 MySQL 数据库
2. **前端状态管理**：使用 Vue 3 Composition API 和 ref/reactive
3. **样式**：使用 CSS 实现简洁干净的布局
4. **游戏流程**：
   - 页面加载时获取随机目标人物
   - 用户输入名称进行搜索
   - 选择搜索结果中的人物作为猜测
   - 系统比较猜测与目标人物
   - 显示比较结果和猜测历史
   - 名称匹配时显示胜利信息，允许重置游戏

## 预期效果

- 用户可以通过搜索框查找历史人物
- 系统显示模糊匹配的搜索结果
- 用户选择人物后，系统显示比较结果
- 出生年份显示上下箭头指示接近程度
- 标签根据匹配情况显示不同颜色
- 显示完整的猜测历史记录
- 猜测正确时显示胜利信息并允许重置游戏